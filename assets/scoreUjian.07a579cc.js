import{p as m,o as a,c as n,a as t,d as g,t as o,s as S,q as d,k as c,F as b,i as j,g as r,b as p,v as _}from"./index.6b43fdec.js";import U from"./sidebar.8e7b97f4.js";const y={class:"d-flex flex-nowrap"},f={class:"d-flex flex-column flex-fill p-3"},k={class:"card",style:{"margin-bottom":"3%"}},v=t("h3",{class:"card-header text-warning"},"Detail",-1),M={class:"card-body"},w={key:0,class:"table table-borderless align-middle"},A=t("td",{style:{width:"10%"}},"Name Ujian",-1),D=t("td",{style:{width:"2%"}},":",-1),N={style:{}},$=t("td",null,"Pengawas",-1),Y=t("td",null,":",-1),B=t("td",null,"Time",-1),C=t("td",null,":",-1),F=t("td",null,"Start Date",-1),O=t("td",null,":",-1),T={key:1,class:"text-center w-100"},V=t("div",{class:"spinner-border text-warning",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),H=[V],J={class:"nav-tabs d-flex justify-content-between"},L=t("h3",{class:"nav-link active bg-light text-warning"},"Score Ujian",-1),K={class:"d-flex align-items-center"},R={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},q={class:"table table-hover align-middle",style:{"margin-bottom":"2em"}},z=t("thead",null,[t("tr",null,[t("th",{scope:"col"}),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Date Sumbit"),t("th",{scope:"col"},"Link Submit"),t("th",{scope:"col"},"Score")])],-1),E={key:0},G=t("td",{colspan:"10"},[t("div",{class:"text-center"},[t("div",{class:"spinner-border text-warning",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])],-1),I=[G],P={key:1},Q=t("td",{colspan:"10",class:"text-center"},"Data Tidak Tersedia",-1),W=[Q],X={style:{width:"5%","text-align":"center"}},Z={key:0,style:{width:"10%","text-align":"center"}},x=["onKeyup","onUpdate:modelValue"],tt={key:1,style:{width:"5%","text-align":"center"}},et={key:0,class:"min-vw-100 position-fixed top-0 text-center",style:{}};m().format();const st={data:()=>({token:"",editMode:!1,ujianSatuan:{},listUjianSubmit:[],listUjianSubmitAdd:[],displayMessage:!1}),async mounted(){try{this.token=await this.$store.getters["auth/token"],r.defaults.headers.common.token=this.token,this.ujianSatuan=(await r.get("guru/ujianSatuan/"+this.$route.params.id,{})).data.data,this.listUjianSubmit=(await r.get("guru/listUjianSubmit/"+this.$route.params.id,{})).data.data,this.listUjianSubmit.length==0&&(this.listUjianSubmit=!1);for(let s=0;s<this.listUjianSubmit.length;s++)this.listUjianSubmit[s].submit_date=m(this.listUjianSubmit[s].date).format("DD MMMM YYYY, HH:mm");this.listUjianSubmitAdd=JSON.parse(JSON.stringify(this.listUjianSubmit))}catch(s){console.log("error"),console.log(s)}},methods:{async cekScore(s){try{this.listUjianSubmitAdd[s].score>100?this.listUjianSubmitAdd[s].score=100:this.listUjianSubmitAdd[s].score=Number.parseInt(this.listUjianSubmitAdd[s].score)}catch(e){console.log("error"),console.log(e)}},async refreshUjianSubmit(s,e){try{this.listUjianSubmit=(await r.get("guru/listUjianSubmit/"+this.$route.params.id,{})).data.data,this.listUjianSubmit.length==0&&(this.listUjianSubmit=!1),this.listUjianSubmitAdd=JSON.parse(JSON.stringify(this.listUjianSubmit)),s?this.messageF(s,e):this.messageF("Refresh Batch",!0)}catch(i){console.log("error"),console.log(i)}},async saveAddAcore(){try{for(let s=0;s<this.listUjianSubmit.length;s++)this.listUjianSubmit[s].score!=this.listUjianSubmitAdd[s].score&&await r.post("guru/addScoreUjian/"+this.listUjianSubmitAdd[s].id_ujian,{[this.listUjianSubmitAdd[s].id]:this.listUjianSubmitAdd[s].score});this.refreshUjianSubmit("Berhasil Mengupdate Score Ujian Submit",!0)}catch(s){console.log("error"),console.log(s)}},messageF(s,e){this.displayMessage=!0,this.messageStatus=e,this.message=s||"terjadi error",setTimeout(()=>{this.displayMessage=!1,this.message="terjadi error"},3e3)}}},nt=Object.assign(st,{__name:"scoreUjian",setup(s){return(e,i)=>(a(),n(b,null,[t("main",y,[g(U),t("div",f,[t("div",k,[v,t("div",M,[e.ujianSatuan.name?(a(),n("table",w,[t("tr",null,[A,D,t("td",N,o(e.ujianSatuan.name),1)]),t("tr",null,[$,Y,t("td",null,o(e.ujianSatuan.pengawas),1)]),t("tr",null,[B,C,t("td",null,o(e.ujianSatuan.time),1)]),t("tr",null,[F,O,t("td",null,o(S(m)(e.ujianSatuan.date).format("dddd, DD MMMM YYYY, HH:mm")),1)])])):(a(),n("div",T,H))])]),t("div",J,[L,t("div",K,[t("div",R,[t("button",{type:"button",class:d(["btn-sm btn btn-outline-warning",{"d-block":!e.editMode,"d-none":e.editMode}]),onClick:i[0]||(i[0]=l=>e.editMode=!0)},"Add Score",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-primary",{"d-block":e.editMode,"d-none":!e.editMode}]),onClick:i[1]||(i[1]=l=>e.editMode=!1)},"Back",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-danger",{"d-block":e.editMode,"d-none":!e.editMode}]),onClick:i[2]||(i[2]=l=>e.refreshUjianSubmit())},"Reset",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-success",{"d-block":e.editMode,"d-none":!e.editMode}]),onClick:i[3]||(i[3]=l=>e.saveAddAcore())},"Save",2)])])]),t("table",q,[z,t("tbody",null,[e.listUjianSubmit.length==0?(a(),n("tr",E,I)):c("",!0),e.listUjianSubmit?c("",!0):(a(),n("tr",P,W)),(a(!0),n(b,null,j(e.listUjianSubmit,(l,u)=>(a(),n("tr",null,[t("td",X,o(u+1),1),t("td",null,o(l.name),1),t("td",null,o(l.submit_date),1),t("td",null,o(l.submit_link),1),e.editMode?(a(),n("td",Z,[p(t("input",{onKeyup:h=>e.cekScore(u),"onUpdate:modelValue":h=>e.listUjianSubmitAdd[u].score=h,class:"form-control form-control-sm",type:"number",min:"1",max:"100"},null,40,x),[[_,e.listUjianSubmitAdd[u].score]])])):(a(),n("td",tt,o(l.score||"-"),1))]))),256))])])])]),e.displayMessage?(a(),n("div",et,[t("div",{class:d([{"alert-danger":!e.messageStatus,"alert-success":e.messageStatus},"alert d-none d-lg-block"])},o(e.message),3)])):c("",!0)],64))}});export{nt as default};
