import{p as B,o as l,c as n,a as e,d as y,q as c,k as o,F as m,i as b,t as r,g as u,b as g,v as p}from"./index.6b43fdec.js";import f from"./sidebar.8e7b97f4.js";const k={class:"d-flex flex-nowrap"},v={class:"p-3 d-flex flex-column flex-fill"},w={class:"nav-tabs d-flex justify-content-between"},M=e("h3",{class:"nav-link active bg-light text-warning"},"Batch",-1),D={class:"d-flex align-items-center"},P={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},C={class:"table table-hover align-middle"},j=e("th",{scope:"col"},null,-1),E={key:0,scope:"col"},S=e("th",{class:"w-50",scope:"col"},"Name Batch",-1),$=e("th",{class:"w-25",scope:"col"},"Start Date",-1),V=e("th",{class:"w-25 text-center",scope:"col"},"Pay",-1),Y=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),A=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),O=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),U=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),F=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),N=[Y,A,O,U,F],z={key:1},T=e("td",{colspan:"10",class:"text-center"},"Data Tidak Tersedia",-1),L=[T],J={key:0,style:{width:"5%","text-align":"center"}},I={key:1,style:{width:"5%","text-align":"center"}},q=["onClick"],R=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-card-text",viewBox:"0 0 16 16"},[e("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),e("path",{d:"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"})],-1),G=[R],H={key:2},K=["onUpdate:modelValue"],Q={key:3},W={key:4},X=["onUpdate:modelValue"],Z={key:5,class:""},_={key:6,class:"w-25"},x=["onUpdate:modelValue"],tt={key:7,class:"text-center w-25"},et=["onClick"],st=e("button",{type:"button",class:"btn btn-sm btn-outline-danger"},"x",-1),at=[st],it=["onClick"],lt=e("button",{type:"button",class:"btn btn-sm btn-outline-success"},"v",-1),nt=[lt],ot={key:0,"aria-label":"Page navigation example",style:{"margin-top":"2%"}},ht={class:"pagination justify-content-center"},dt={key:0,class:"page-item"},rt={key:1,class:""},ct=e("button",{class:"page-link",style:{}},". . .",-1),ut=[ct],gt={key:2,class:"page-item"},pt={class:"page-item active"},Bt={class:"page-link bg-warning border border-warning"},mt={key:3,class:"page-item"},bt={key:4,class:""},yt=e("button",{class:"page-link",style:{}},". . .",-1),ft=[yt],kt={key:5,class:"page-item"},vt={class:"min-vw-80 bg-light p-3 overflow-auto",style:{height:"80vh",margin:"5% 10%","border-radius":"10px"}},wt={class:"nav-tabs d-flex justify-content-between"},Mt=e("h3",{class:"nav-link active bg-light text-warning"},"Add Batch",-1),Dt={class:"d-flex align-items-center"},Pt={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},Ct={class:"table"},jt=e("thead",null,[e("tr",null,[e("th",{scope:"col"}),e("th",{class:"w-50",scope:"col"},"Name"),e("th",{class:"w-25",scope:"col"},"Start Date"),e("th",{class:"w-25",scope:"col"},"Pay"),e("th",{scope:"col"})])],-1),Et={style:{width:"5%","text-align":"center"}},St=["onUpdate:modelValue"],$t=["onUpdate:modelValue"],Vt=["onUpdate:modelValue"],Yt=["onClick"],At={key:0,class:"min-vw-100 position-fixed top-0 text-center",style:{}};B().format();const Ot={data:()=>({editMode:!1,listBatch:[],listBatchC:[],listEditBatch:[],listDeleteBatch:[],listBatchBaru:[{name:"",date:new Date(new Date().valueOf()+1e3*60*60*24*28+31).toISOString().substring(0,10),pay:1e6}],editMode:!1,displayAddBatch:!1,page:1,jumlah:[0,0,0,0,0,0,0,0,0,0],message:"terjadi error",messageStatus:!0,displayMessage:!1}),async mounted(){try{u.defaults.headers.common.token=await this.$store.getters["auth/token"],this.listBatch=(await u.get("guru/listBatch",{})).data.data,this.listBatch.length==0&&(this.listBatch=!1);for(let s=0;s<this.listBatch.length;s++)this.listBatch[s].dateLocal=B(this.listBatch[s].date).format("DD MMMM YYYY"),this.listBatch[s].date=B(this.listBatch[s].date).format("YYYY-MM-DD");this.listEditBatch=JSON.parse(JSON.stringify(this.listBatch))}catch(s){console.log("error"),console.log(s)}},methods:{keyPage(){return this.page*this.jumlah.length-this.jumlah.length},navigation(s){switch(s){case"previous":this.page-=1;break;case"next":this.page+=1;break;case"first":this.page=1;break;case"last":this.page=this.listBatch.length%this.jumlah.length==0?this.listBatch.length/this.jumlah.length:(this.listBatch.length-this.listBatch.length%this.jumlah.length)/this.jumlah.length+1;break}},async infoMuridBatch(s){try{this.editMode||this.$router.push({name:"anggotaBatch",params:{id:s}})}catch(t){console.log("error"),console.log(t)}},async refreshBatch(s,t){try{this.listBatch=(await u.get("guru/listBatch",{})).data.data,this.listBatch.length==0&&(this.listBatch=!1);for(let i=0;i<this.listBatch.length;i++)this.listBatch[i].dateLocal=B(this.listBatch[i].date).format("DD MMMM YYYY"),this.listBatch[i].date=B(this.listBatch[i].date).format("YYYY-MM-DD");this.listEditBatch=JSON.parse(JSON.stringify(this.listBatch)),s?this.messageF(s,t):this.messageF("Refresh Batch",!0)}catch(i){console.log("error"),console.log(i)}},async saveAddBatch(){try{for(let s=0;this.listBatchBaru.length;s){if(new Date(this.listBatchBaru[s].date)<=new Date)throw this.messageF("Date Tidak Valid",!1),"Date Tidak Valid";if(this.listBatchBaru[s].name&&this.listBatchBaru[s].date&&this.listBatchBaru[s].pay)await u.post("guru/addBatch/",{name:this.listBatchBaru[s].name,startDate:this.listBatchBaru[s].date,pay:this.listBatchBaru[s].pay});else throw this.messageF("Lengkapi Semua Data",!1),"lengkapi semua data";this.listBatchBaru.splice(0,1)}this.displayAddBatch=!1,this.refreshBatch("Berhasil Menambahkan Batch",!0),this.listBatchBaru.push({name:"",pay:1e6,date:new Date(new Date().valueOf()+1e3*60*60*24*28+31).toISOString().substring(0,10)})}catch(s){s.response.data.error.original.routine=="_bt_check_unique"&&this.messageF(`batch ${this.listBatchBaru[0].name} sudah ada`,!1),console.log("error"),console.log(s)}},async saveEditBatch(){try{for(let s=0;s<this.listDeleteBatch.length;s++)await u.delete("guru/deleteBatch/"+this.listDeleteBatch[s],{});for(let s=0;s<this.listBatch.length;s++)if(this.listEditBatch[s].name!=this.listBatch[s].name||this.listEditBatch[s].date!=this.listBatch[s].date||this.listEditBatch[s].pay!=this.listBatch[s].pay){if(new Date(this.listEditBatch[s].date)<=new Date)throw this.messageF("Date Tidak Valid",!1),"Date Tidak Valid";await u.put("guru/updateBatch/"+this.listBatch[s].id,{name:this.listEditBatch[s].name,startDate:this.listEditBatch[s].date,pay:this.listEditBatch[s].pay})}this.editMode=!1,this.refreshBatch("Berhasil Mengupdate Batch",!0)}catch(s){console.log("error"),console.log(s)}},messageF(s,t){this.displayMessage=!0,this.messageStatus=t,this.message=s||"terjadi error",setTimeout(()=>{this.displayMessage=!1,this.message="terjadi error"},3e3)}}},Nt=Object.assign(Ot,{__name:"dashboard1",setup(s){return(t,i)=>(l(),n(m,null,[e("main",k,[y(f),e("div",v,[e("div",w,[M,e("div",D,[e("div",P,[e("button",{type:"button",class:c(["btn-sm btn btn-outline-warning",{"d-block":!t.editMode,"d-none":t.editMode}]),onClick:i[0]||(i[0]=h=>t.displayAddBatch=!0)},"Add",2),e("button",{type:"button",class:c(["btn-sm btn btn-outline-warning",{"d-block":!t.editMode,"d-none":t.editMode}]),onClick:i[1]||(i[1]=h=>t.editMode=!0)},"Edit",2),e("button",{type:"button",class:c(["btn-sm btn btn-outline-primary",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:i[2]||(i[2]=h=>t.editMode=!1)},"Back",2),e("button",{type:"button",class:c(["btn-sm btn btn-outline-danger",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:i[3]||(i[3]=h=>t.refreshBatch())},"Reset",2),e("button",{type:"button",class:c(["btn-sm btn btn-outline-success",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:i[4]||(i[4]=h=>t.saveEditBatch())},"Save",2)])])]),e("table",C,[e("thead",null,[e("tr",null,[j,t.editMode?o("",!0):(l(),n("th",E)),S,$,V])]),e("tbody",null,[t.listBatch.length==0?(l(!0),n(m,{key:0},b(t.jumlah,h=>(l(),n("tr",null,N))),256)):o("",!0),t.listBatch?o("",!0):(l(),n("tr",z,L)),t.listBatch.length?(l(!0),n(m,{key:2},b(t.jumlah,(h,a)=>(l(),n("tr",{class:c({"table-danger":t.editMode&&t.listDeleteBatch.includes(h.id)})},[t.listBatch[t.keyPage()+a]?(l(),n("td",J,r(t.keyPage()+a+1),1)):o("",!0),t.listBatch[t.keyPage()+a]&&!t.editMode?(l(),n("td",I,[e("button",{class:"btn btn-sm btn-outline-warning",type:"button",onClick:d=>t.infoMuridBatch(t.listBatch[t.keyPage()+a].id)},G,8,q)])):o("",!0),t.editMode&&t.listBatch[t.keyPage()+a]&&new Date(t.listBatch[t.keyPage()+a].start_date)>new Date?(l(),n("td",H,[g(e("input",{"onUpdate:modelValue":d=>t.listEditBatch[t.keyPage()+a].name=d,class:"form-control form-control-sm",type:"text"},null,8,K),[[p,t.listEditBatch[t.keyPage()+a].name]])])):t.listBatch[t.keyPage()+a]?(l(),n("td",Q,r(t.listBatch[t.keyPage()+a].name),1)):o("",!0),t.editMode&&t.listBatch[t.keyPage()+a]&&new Date(t.listBatch[t.keyPage()+a].start_date)>new Date?(l(),n("td",W,[g(e("input",{"onUpdate:modelValue":d=>t.listEditBatch[t.keyPage()+a].date=d,class:"form-control form-control-sm",type:"date"},null,8,X),[[p,t.listEditBatch[t.keyPage()+a].date]])])):t.listBatch[t.keyPage()+a]?(l(),n("td",Z,r(t.listBatch[t.keyPage()+a].dateLocal),1)):o("",!0),t.editMode&&t.listBatch[t.keyPage()+a]&&new Date(t.listBatch[t.keyPage()+a].start_date)>new Date?(l(),n("td",_,[g(e("input",{"onUpdate:modelValue":d=>t.listEditBatch[t.keyPage()+a].pay=d,class:"form-control form-control-sm text-center",type:"number"},null,8,x),[[p,t.listEditBatch[t.keyPage()+a].pay]])])):t.listBatch[t.keyPage()+a]?(l(),n("td",tt,r(t.listBatch[t.keyPage()+a].pay),1)):o("",!0),t.editMode&&t.listBatch[t.keyPage()+a]&&!t.listDeleteBatch.includes(t.listBatch[t.keyPage()+a].id)?(l(),n("td",{key:8,style:{width:"5%","text-align":"center"},onClick:d=>t.listDeleteBatch.push(t.listBatch[t.keyPage()+a].id)},at,8,et)):o("",!0),t.editMode&&t.listBatch[t.keyPage()+a]&&t.listDeleteBatch.includes(t.listBatch[t.keyPage()+a].id)?(l(),n("td",{key:9,style:{width:"5%","text-align":"center"},onClick:d=>t.listDeleteBatch.splice(t.listDeleteBatch.indexOf(t.listBatch[t.keyPage()+a].id))},nt,8,it)):o("",!0)],2))),256)):o("",!0)])]),t.listBatch.length>0?(l(),n("nav",ot,[e("ul",ht,[t.page!=1?(l(),n("li",dt,[e("button",{class:"page-link text-warning",onClick:i[5]||(i[5]=h=>t.navigation("first"))},"1")])):o("",!0),t.page>3?(l(),n("li",rt,ut)):o("",!0),t.page>2?(l(),n("li",gt,[e("button",{class:"page-link text-warning",onClick:i[6]||(i[6]=h=>t.navigation("previous"))},r(t.page-1),1)])):o("",!0),e("li",pt,[e("button",Bt,r(t.page),1)]),(t.page+1)*t.jumlah.length<t.listBatch.length?(l(),n("li",mt,[e("button",{class:"page-link text-warning",onClick:i[7]||(i[7]=h=>t.navigation("next"))},r(t.page+1),1)])):o("",!0),(t.page+2)*t.jumlah.length<t.listBatch.length?(l(),n("li",bt,ft)):o("",!0),t.page*t.jumlah.length<t.listBatch.length?(l(),n("li",kt,[e("button",{class:"page-link text-warning",onClick:i[8]||(i[8]=h=>t.navigation("last"))},r(t.listBatch.length%t.jumlah.length==0?t.listBatch.length/t.jumlah.length:(t.listBatch.length-t.listBatch.length%t.jumlah.length)/t.jumlah.length+1),1)])):o("",!0)])])):o("",!0)])]),e("div",{class:c([{"d-block":t.displayAddBatch,"d-none":!t.displayAddBatch},"min-vw-100 min-vh-100 position-fixed top-0"]),style:{"z-index":"1000"}},[e("div",{class:"min-vw-100 min-vh-100 bg-black opacity-50 position-absolute",style:{"z-index":"-1"},onClick:i[9]||(i[9]=h=>t.displayAddBatch=!1)}),e("div",vt,[e("div",wt,[Mt,e("div",Dt,[e("div",Pt,[e("button",{type:"button",class:"btn-sm btn btn-outline-success",onClick:i[10]||(i[10]=h=>t.saveAddBatch())},"Save"),e("button",{type:"button",class:"btn-sm btn btn-outline-primary",onClick:i[11]||(i[11]=h=>t.listBatchBaru.push({name:"",pay:1e6,date:new Date(new Date().valueOf()+1e3*60*60*24*28+31).toISOString().substring(0,10)}))},"+"),e("button",{type:"button",class:"btn-sm btn btn-outline-danger",onClick:i[12]||(i[12]=h=>t.displayAddBatch=!1)},"x")])])]),e("table",Ct,[jt,e("tbody",null,[(l(!0),n(m,null,b(t.listBatchBaru,(h,a)=>(l(),n("tr",null,[e("td",Et,r(a+1),1),e("td",null,[g(e("input",{"onUpdate:modelValue":d=>t.listBatchBaru[a].name=d,class:"form-control form-control-sm",type:"text"},null,8,St),[[p,t.listBatchBaru[a].name]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":d=>t.listBatchBaru[a].date=d,class:"form-control form-control-sm",type:"date"},null,8,$t),[[p,t.listBatchBaru[a].date]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":d=>t.listBatchBaru[a].pay=d,class:"form-control form-control-sm",type:"number"},null,8,Vt),[[p,t.listBatchBaru[a].pay]])]),e("td",{style:{width:"5%","text-align":"center"},onClick:d=>t.listBatchBaru.splice(a,1)},"x",8,Yt)]))),256))])])])],2),t.displayMessage?(l(),n("div",At,[e("div",{class:c([{"alert-danger":!t.messageStatus,"alert-success":t.messageStatus},"alert d-none d-lg-block"])},r(t.message),3)])):o("",!0)],64))}});export{Nt as default};
