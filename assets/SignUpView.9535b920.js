import{_ as h,g as y,r as p,o as n,c as l,a as e,w as x,b as a,h as w,F as b,i as U,t as f,v as m,d as V,e as P,f as u,j as d,k,K as B}from"./index.6b43fdec.js";import C from"./Step2.21951b40.js";import N from"./Step3.69b5444f.js";import q from"./Step4.67ef0dee.js";const R={props:["name","email"],data(){return{form:{id_batch:"",name:"",email:"",password:"",confirm_password:"",birthdate:""},listBatch:[]}},async mounted(){try{this.name&&this.name!="undefined"&&(this.form.name=this.name),this.email&&this.email!="undefined"&&(this.form.email=this.email),console.log("ini list batch");const o=await y.get("/available-batch");this.listBatch=o.data.data}catch(o){console.log(o)}},methods:{next(){!this.formValidation()||(this.$emit("nextStep"),this.$emit("saveForm",this.form))},prev(){this.$emit("prevStep")},formValidation(){for(let o in this.form)if(this.form[o]==""){alert("Please fill the "+o+" field");return}if(this.form.password!=this.form.confirm_password){alert("Password and Confirm Password doesn't match");return}if(this.getAge(this.form.birthdate)<18){alert("You must be at least 18 years to register");return}return!0},getAge(o){return this.$moment().diff(o,"years")}}},F={class:"background"},I={class:"window"},T=e("div",{id:"signup_icon"},[e("img",{src:"",alt:"",srcset:""})],-1),K=e("div",{id:"title"},"Bebas",-1),A={class:"form-group"},j=e("label",{for:"batch"},"Pilih Batch",-1),D=["value"],L={key:1},M=e("div",{class:"alert alert-danger"},[e("strong",null,"Oops!"),u(" Belum ada batch tersedia. ")],-1),O=[M],Y={id:"text"},E=u(" Already have an account? "),z=u("Sign In");function G(o,s,v,_,t,i){const c=p("RouterLink");return n(),l("div",F,[e("div",I,[T,K,e("form",{onSubmit:s[7]||(s[7]=x(()=>{},["prevent"])),style:{"justify-content":"center"}},[e("div",A,[j,t.listBatch?a((n(),l("select",{key:0,"onUpdate:modelValue":s[0]||(s[0]=r=>t.form.id_batch=r),class:"form-select form-control",required:"",name:"batch",id:""},[(n(!0),l(b,null,U(t.listBatch,r=>(n(),l("option",{value:r.id,key:r.id},f(r.name),9,D))),128))],512)),[[w,t.form.id_batch]]):(n(),l("div",L,O))]),e("div",null,[a(e("input",{required:"","onUpdate:modelValue":s[1]||(s[1]=r=>t.form.name=r),class:"fields",type:"text",name:"username",id:"text",placeholder:"Your Name"},null,512),[[m,t.form.name]])]),e("div",null,[a(e("input",{required:"","onUpdate:modelValue":s[2]||(s[2]=r=>t.form.email=r),class:"fields",type:"email",name:"email",id:"text",placeholder:"Your E-mail"},null,512),[[m,t.form.email]])]),e("div",null,[e("div",null,[a(e("input",{required:"","onUpdate:modelValue":s[3]||(s[3]=r=>t.form.password=r),class:"fields",type:"password",name:"password",id:"text",placeholder:"Password"},null,512),[[m,t.form.password]])]),e("div",null,[a(e("input",{required:"","onUpdate:modelValue":s[4]||(s[4]=r=>t.form.confirm_password=r),class:"fields",type:"password",name:"password.confirm",id:"text",placeholder:"Confirm Password"},null,512),[[m,t.form.confirm_password]])])]),e("div",null,[a(e("input",{required:"","onUpdate:modelValue":s[5]||(s[5]=r=>t.form.birthdate=r),class:"fields",id:"text",type:"text",placeholder:"Date of Birth",onfocus:"(this.type='date')",onblur:"(this.type='text')"},null,512),[[m,t.form.birthdate]])]),e("div",null,[e("input",{style:{margin:"2em auto"},onClick:s[6]||(s[6]=(...r)=>i.next&&i.next(...r)),class:"buttons",type:"submit",value:"Next"})])],32),e("div",Y,[e("p",null,[E,V(c,{to:"/login"},{default:P(()=>[z]),_:1})])])])])}var H=h(R,[["render",G]]);const J={components:{SignUpVue:H,SignUpVue2:C,SignUpVue3:N,SignUpVue4:q},data(){return{step:1,data:{name:decodeURIComponent(this.$route.query.name),email:decodeURIComponent(this.$route.query.email),profile:decodeURIComponent(this.$route.query.picture)},form:{name:"",email:"",password:"",confirm_password:"",birthdate:"",ktp:"",profile:"",id_batch:"",address:"test",contact:"0823241212",birthday:"12/12/1996"},listBatch:[]}},async mounted(){try{this.data.name=decodeURIComponent(this.$route.query.name),this.data.email=decodeURIComponent(this.$route.query.email),this.data.profile=decodeURIComponent(this.$route.query.picture),console.log(this.data)}catch(o){console.log("error"),console.log(o)}},methods:{next(){this.step++},prev(){this.step--},saveForm(o){this.form=o},saveKTP(o){this.form.ktp=o},savePicture(o){this.form.profile=o},async sendForm(){try{await this.$store.dispatch("auth/registerOtp",this.form)}catch(o){console.log(o)}},async completeRegister(o){try{if(this.form.otp=o,this.form.address="test",this.form.contact="0823241212",this.form.birthday=this.form.birthdate,await this.$store.dispatch("auth/register",this.form))this.$router.push("/login");else throw"OTP tidak valid"}catch(s){alert(s),console.log(s)}}}},Q={class:"d-flex items-center justify-content-center mx-auto"};function W(o,s,v,_,t,i){const c=p("SignUpVue"),r=p("SignUpVue2"),g=p("SignUpVue3"),S=p("SignUpVue4");return n(),l("main",null,[u(f(t.step)+" ",1),e("div",Q,[(n(),d(B,null,[t.step===1?(n(),d(c,{key:0,onPrevStep:i.prev,onNextStep:i.next,onSaveForm:i.saveForm,name:t.data.name,email:t.data.email},null,8,["onPrevStep","onNextStep","onSaveForm","name","email"])):t.step===2?(n(),d(r,{key:1,onPrevStep:i.prev,onNextStep:i.next,onSaveKTP:i.saveKTP},null,8,["onPrevStep","onNextStep","onSaveKTP"])):t.step===3?(n(),d(g,{key:2,onPrevStep:i.prev,onNextStep:i.next,onSavePicture:i.savePicture,onSendForm:i.sendForm},null,8,["onPrevStep","onNextStep","onSavePicture","onSendForm"])):t.step===4?(n(),d(S,{key:3,onPrevStep:i.prev,onNextStep:i.next,onCompleteRegister:i.completeRegister,email:t.form.email},null,8,["onPrevStep","onNextStep","onCompleteRegister","email"])):k("",!0)],1024))])])}var te=h(J,[["render",W]]);export{te as default};
