import{p,o as n,c as l,a as e,d as b,q as u,k as r,F as U,i as c,t as h,g as j,b as g,v as m}from"./index.6b43fdec.js";import f from"./sidebar.8e7b97f4.js";const w={class:"d-flex flex-nowrap"},y={class:"d-flex flex-column flex-fill p-3"},v={class:"nav-tabs d-flex justify-content-between"},k=e("h3",{class:"nav-link active bg-light text-warning"},"Ujian ",-1),B={class:"d-flex align-items-center"},M={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},D={class:"table table-hover align-middle",style:{"margin-bottom":"2em"}},P=e("th",{scope:"col"},null,-1),E={key:0,scope:"col"},C=e("th",{class:"text-center",scope:"col"},"Batch",-1),V=e("th",{class:"text-center",scope:"col"},"Name Ujian",-1),A=e("th",{class:"text-center",scope:"col"},"Pengawas",-1),$=e("th",{class:"text-center",scope:"col"},"Time",-1),S=e("th",{class:"text-center",scope:"col"},"Date",-1),Y={key:1,scope:"col"},T=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),F=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),O=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),N=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),z=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),H=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),L=e("td",{style:{padding:"8px 15px",border:"10px solid white","background-color":"rgb(240, 240, 240)",color:"rgb(240, 240, 240)"}},"-",-1),I=[T,F,O,N,z,H,L],J={key:1},G=e("td",{colspan:"10",class:"text-center"},"Data Tidak Tersedia",-1),q=[G],R={key:0,style:{width:"5%","text-align":"center"}},K={key:1,style:{width:"5%","text-align":"center"}},Q=["onClick"],W=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-card-text",viewBox:"0 0 16 16"},[e("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),e("path",{d:"M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8zm0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5z"})],-1),X=[W],Z={key:2},_={key:3},x=["onUpdate:modelValue"],tt={key:4},et={key:5},it=["onUpdate:modelValue"],st={key:6},at={key:7},nt=["onUpdate:modelValue"],lt={key:8,class:"text-center"},ot={key:9},dt=["onUpdate:modelValue"],rt={key:10,class:""},ht=["onClick"],ut=e("button",{type:"button",class:"btn btn-sm btn-outline-danger"},"x",-1),gt=[ut],mt=["onClick"],pt=e("button",{type:"button",class:"btn btn-sm btn-outline-success"},"v",-1),jt=[pt],Ut={key:0,"aria-label":"Page navigation example",style:{"margin-top":"2%"}},ct={class:"pagination justify-content-center"},bt={key:0,class:"page-item"},ft={key:1,class:""},wt=e("button",{class:"page-link",style:{}},". . .",-1),yt=[wt],vt={key:2,class:"page-item"},kt={class:"page-item active"},Bt={class:"page-link bg-warning border border-warning"},Mt={key:3,class:"page-item"},Dt={key:4,class:""},Pt=e("button",{class:"page-link",style:{}},". . .",-1),Et=[Pt],Ct={key:5,class:"page-item"},Vt={class:"min-vw-80 bg-light p-3 overflow-auto",style:{height:"80vh",margin:"5% 10%","border-radius":"10px"}},At={class:"nav-tabs d-flex justify-content-between"},$t=e("h3",{class:"nav-link active bg-light text-warning"},"Add Ujian",-1),St={class:"d-flex align-items-center"},Yt={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},Tt={class:"table"},Ft=e("thead",null,[e("tr",null,[e("th",{style:{width:"5%"},scope:"col"}),e("th",{style:{width:"20%"},scope:"col"},"Name Batch"),e("th",{style:{width:"20%"},scope:"col"},"Name Ujian"),e("th",{style:{width:"20%"},scope:"col"},"Pengawas"),e("th",{style:{width:"10%"},scope:"col"},"Time"),e("th",{style:{width:"20%"},scope:"col"},"Date"),e("th",{style:{width:"5%"},scope:"col"})])],-1),Ot={class:"text-center"},Nt={class:"position-relative"},zt=["onUpdate:modelValue","onFocus","onBlur"],Ht={style:{height:"30vh",width:"12vw"}},Lt=["onClick"],It=["onUpdate:modelValue"],Jt=["onUpdate:modelValue"],Gt=["onUpdate:modelValue"],qt=["onUpdate:modelValue"],Rt=["onClick"],Kt={key:0,class:"min-vw-100 position-fixed top-0 text-center",style:{}};p().format();const Qt={data:()=>({listBatch:[],listUjian:[],listEditUjian:[],listDeleteUjian:[],listUjianBaru:[{name:"",pengawas:"",time:"02:00:00",date:new Date(new Date().valueOf()+1e3*60*60*31).toISOString().substring(0,16)}],displayAddUjian:!1,modeAddBatch:!1,editMode:!1,page:1,jumlah:[0,0,0,0,0,0,0,0,0,0],message:"terjadi error",messageStatus:!0,displayMessage:!1}),async mounted(){try{this.token=await this.$store.getters["auth/token"],j.defaults.headers.common.token=this.token,this.listUjian=(await j.get("guru/listUjianGuru",{})).data.data,this.listUjian.length==0&&(this.listUjian=!1);for(let s=0;s<this.listUjian.length;s++)this.listUjian[s].date1=p(this.listUjian[s].date).format("dddd, DD MMMM YYYY, HH:mm"),this.listUjian[s].datetime2=p(this.listUjian[s].date,p.DATETIME_LOCAL).format(),this.listUjian[s].datetime1=p(this.listUjian[s].date).format(),this.listUjian[s].datetime=p(this.listUjian[s].date).format("YYYY-MM-DDTHH:mm");this.listEditUjian=JSON.parse(JSON.stringify(this.listUjian)),this.listBatch=(await j.get("guru/listBatch",{})).data.data,this.listBatch.length==0&&(this.listBatch=!1)}catch(s){console.log("error"),console.log(s)}},methods:{keyPage(){return this.page*this.jumlah.length-this.jumlah.length},navigation(s){switch(s){case"previous":this.page-=1;break;case"next":this.page+=1;break;case"first":this.page=1;break;case"last":this.page=this.listUjian.length%this.jumlah.length==0?this.listUjian.length/this.jumlah.length:(this.listUjian.length-this.listUjian.length%this.jumlah.length)/this.jumlah.length+1;break}},async modeAddBatchF(s){try{setTimeout(()=>{this.listUjianBaru[s].modeAddBatch=!1},200)}catch(t){console.log("error"),console.log(t)}},async saveAddUjian(){try{let s=null;for(let t=0;this.listUjianBaru.length;t){if(this.listUjianBaru[t].nameBatch&&this.listUjianBaru[t].name&&this.listUjianBaru[t].pengawas&&this.listUjianBaru[t].time&&this.listUjianBaru[t].date){let a={};s=null;for(let d=0;d<this.listBatch.length;d++)this.listUjianBaru[t].nameBatch==this.listBatch[d].name&&(s=this.listBatch[d].id);if(s){if(new Date(this.listUjianBaru[t].date)<=new Date)throw this.messageF("Date Tidak Valid",!1),"Date Tidak Valid"}else throw this.messageF(`batch ${this.listUjianBaru[t].nameBatch} tidak tersedia`,!1),"batch tidak tersedia";await j.post("guru/addUjian/"+s,{name:this.listUjianBaru[t].name,pengawas:this.listUjianBaru[t].pengawas,time:this.listUjianBaru[t].time,date:this.listUjianBaru[t].date})}else throw this.messageF("Lengkapi Semua Data",!1),"lengkapi semua data";this.listUjianBaru.splice(0,1)}this.displayAddUjian=!1,this.refreshUjian("berhasil menambahkan ujian",!0),this.listUjianBaru.push({name:"",pengawas:"",time:"02:00:00",date:new Date(new Date().valueOf()+1e3*60*60*31).toISOString().substring(0,16)})}catch(s){console.log("error"),console.log(s)}},async saveEditUjian(){try{for(let s=0;s<this.listDeleteUjian.length;s++)await j.delete("guru/deleteUjian/"+this.listDeleteUjian[s],{});for(let s=0;s<this.listEditUjian.length;s++)if(this.listEditUjian[s].name!=this.listUjian[s].name||this.listEditUjian[s].time!=this.listUjian[s].time||this.listEditUjian[s].pengawas!=this.listUjian[s].pengawas||this.listEditUjian[s].datetime!=this.listUjian[s].datetime){if(new Date(this.listEditUjian[s].datetime)<=new Date)throw this.messageF("Date Tidak Valid",!1),"Date Tidak Valid";await j.put("guru/updateUjian/"+this.listUjian[s].id,{name:this.listEditUjian[s].name,pengawas:this.listEditUjian[s].pengawas,time:this.listEditUjian[s].time,date:this.listEditUjian[s].datetime})}this.editMode=!1,this.refreshUjian("Berhasil Mengupdate Ujian",!0)}catch(s){console.log("error"),console.log(s)}},async refreshUjian(s,t){try{this.listUjian=(await j.get("guru/listUjianGuru")).data.data,this.listUjian.length==0&&(this.listUjian=!1);for(let a=0;a<this.listUjian.length;a++)this.listUjian[a].date1=p(this.listUjian[a].date).format("dddd, DD MMMM YYYY, HH:mm"),this.listUjian[a].datetime=p(this.listUjian[a].date).format("YYYY-MM-DDTHH:mm");this.listEditUjian=JSON.parse(JSON.stringify(this.listUjian)),s?this.messageF(s,t):this.messageF("refresh materi",!0)}catch(a){console.log("error"),console.log(a)}},async scoreUjian(s){try{this.editMode||this.$router.push({name:"scoreUjian",params:{id:s}})}catch(t){console.log("error"),console.log(t)}},messageF(s,t){this.displayMessage=!0,this.messageStatus=t,this.message=s||"terjadi error",setTimeout(()=>{this.displayMessage=!1,this.message="terjadi error"},3e3)}}},xt=Object.assign(Qt,{__name:"listUjian",setup(s){return(t,a)=>(n(),l(U,null,[e("main",w,[b(f),e("div",y,[e("div",v,[k,e("div",B,[e("div",M,[e("button",{type:"button",class:u(["btn-sm btn btn-outline-warning",{"d-block":!t.editMode,"d-none":t.editMode}]),onClick:a[0]||(a[0]=d=>t.displayAddUjian=!0)},"Add",2),e("button",{type:"button",class:u(["btn-sm btn btn-outline-warning",{"d-block":!t.editMode,"d-none":t.editMode}]),onClick:a[1]||(a[1]=d=>t.editMode=!0)},"Edit",2),e("button",{type:"button",class:u(["btn-sm btn btn-outline-primary",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:a[2]||(a[2]=d=>t.editMode=!1)},"Back",2),e("button",{type:"button",class:u(["btn-sm btn btn-outline-danger",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:a[3]||(a[3]=d=>t.refreshUjian())},"Reset",2),e("button",{type:"button",class:u(["btn-sm btn btn-outline-success",{"d-block":t.editMode,"d-none":!t.editMode}]),onClick:a[4]||(a[4]=d=>t.saveEditUjian())},"Save",2)])])]),e("table",D,[e("thead",null,[e("tr",null,[P,t.editMode?r("",!0):(n(),l("th",E)),C,V,A,$,S,t.editMode?(n(),l("th",Y)):r("",!0)])]),e("tbody",null,[t.listUjian.length==0?(n(!0),l(U,{key:0},c(t.jumlah,d=>(n(),l("tr",null,I))),256)):r("",!0),t.listUjian?r("",!0):(n(),l("tr",J,q)),t.listUjian.length?(n(!0),l(U,{key:2},c(t.jumlah,(d,i)=>(n(),l("tr",{class:u({"table-danger":t.editMode&&t.listDeleteUjian.includes(d.id)})},[t.listUjian[t.keyPage()+i]?(n(),l("td",R,h(t.keyPage()+i+1),1)):r("",!0),!t.editMode&&t.listUjian[t.keyPage()+i]?(n(),l("td",K,[e("button",{class:"btn btn-sm btn-outline-warning",type:"button",onClick:o=>t.scoreUjian(t.listUjian[t.keyPage()+i].id)},X,8,Q)])):r("",!0),t.listUjian[t.keyPage()+i]?(n(),l("td",Z,h(t.listUjian[t.keyPage()+i].name_batch),1)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&t.listEditUjian[i]&&new Date(t.listUjian[t.keyPage()+i].date)>new Date?(n(),l("td",_,[g(e("input",{"onUpdate:modelValue":o=>t.listEditUjian[i].name=o,class:"form-control form-control-sm",type:"text"},null,8,x),[[m,t.listEditUjian[i].name]])])):t.listUjian[t.keyPage()+i]?(n(),l("td",tt,h(t.listUjian[t.keyPage()+i].name),1)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&t.listEditUjian[i]&&new Date(t.listUjian[t.keyPage()+i].date)>new Date?(n(),l("td",et,[g(e("input",{"onUpdate:modelValue":o=>t.listEditUjian[i].pengawas=o,class:"form-control form-control-sm",type:"text"},null,8,it),[[m,t.listEditUjian[i].pengawas]])])):t.listUjian[t.keyPage()+i]?(n(),l("td",st,h(t.listUjian[t.keyPage()+i].pengawas),1)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&t.listEditUjian[i]&&new Date(t.listUjian[t.keyPage()+i].date)>new Date?(n(),l("td",at,[g(e("input",{"onUpdate:modelValue":o=>t.listEditUjian[i].time=o,class:"form-control form-control-sm",type:"time"},null,8,nt),[[m,t.listEditUjian[i].time]])])):t.listUjian[t.keyPage()+i]?(n(),l("td",lt,h(t.listUjian[t.keyPage()+i].time),1)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&t.listEditUjian[i]&&new Date(t.listUjian[t.keyPage()+i].date)>new Date?(n(),l("td",ot,[g(e("input",{"onUpdate:modelValue":o=>t.listEditUjian[i].datetime=o,class:"form-control form-control-sm",type:"datetime-local"},null,8,dt),[[m,t.listEditUjian[i].datetime]])])):t.listUjian[t.keyPage()+i]?(n(),l("td",rt,h(t.listUjian[t.keyPage()+i].date1),1)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&!t.listDeleteUjian.includes(t.listUjian[t.keyPage()+i].id)?(n(),l("td",{key:11,style:{width:"5%","text-align":"center"},onClick:o=>t.listDeleteUjian.push(t.listUjian[t.keyPage()+i].id)},gt,8,ht)):r("",!0),t.editMode&&t.listUjian[t.keyPage()+i]&&t.listDeleteUjian.includes(t.listUjian[t.keyPage()+i].id)?(n(),l("td",{key:12,style:{width:"5%","text-align":"center"},onClick:o=>t.listDeleteUjian.splice(t.listDeleteUjian.indexOf(t.listUjian[t.keyPage()+i].id))},jt,8,mt)):r("",!0)],2))),256)):r("",!0)])]),t.listUjian.length>0?(n(),l("nav",Ut,[e("ul",ct,[t.page!=1?(n(),l("li",bt,[e("button",{class:"page-link text-warning",onClick:a[5]||(a[5]=d=>t.navigation("first"))},"1")])):r("",!0),t.page>3?(n(),l("li",ft,yt)):r("",!0),t.page>2?(n(),l("li",vt,[e("button",{class:"page-link text-warning",onClick:a[6]||(a[6]=d=>t.navigation("previous"))},h(t.page-1),1)])):r("",!0),e("li",kt,[e("button",Bt,h(t.page),1)]),(t.page+1)*t.jumlah.length<t.listUjian.length?(n(),l("li",Mt,[e("button",{class:"page-link text-warning",onClick:a[7]||(a[7]=d=>t.navigation("next"))},h(t.page+1),1)])):r("",!0),(t.page+2)*t.jumlah.length<t.listUjian.length?(n(),l("li",Dt,Et)):r("",!0),t.page*t.jumlah.length<t.listUjian.length?(n(),l("li",Ct,[e("button",{class:"page-link text-warning",onClick:a[8]||(a[8]=d=>t.navigation("last"))},h(t.listUjian.length%t.jumlah.length==0?t.listUjian.length/t.jumlah.length:(t.listUjian.length-t.listUjian.length%t.jumlah.length)/t.jumlah.length+1),1)])):r("",!0)])])):r("",!0)])]),e("div",{class:u([{"d-block":t.displayAddUjian,"d-none":!t.displayAddUjian},"min-vw-100 min-vh-100 position-fixed top-0"]),style:{}},[e("div",{class:"min-vw-100 min-vh-100 bg-black opacity-50 position-absolute",style:{"z-index":"-1"},onClick:a[9]||(a[9]=d=>t.displayAddUjian=!1)}),e("div",Vt,[e("div",At,[$t,e("div",St,[e("div",Yt,[e("button",{type:"button",class:"btn-sm btn btn-outline-success",onClick:a[10]||(a[10]=d=>t.saveAddUjian())},"Save"),e("button",{type:"button",class:"btn-sm btn btn-outline-primary",onClick:a[11]||(a[11]=d=>t.listUjianBaru.push({name:"",pengawas:"",time:"02:00:00",date:new Date(new Date().valueOf()+1e3*60*60*31).toISOString().substring(0,16)}))},"+"),e("button",{type:"button",class:"btn-sm btn btn-outline-danger",onClick:a[12]||(a[12]=d=>t.displayAddUjian=!1)},"x")])])]),e("table",Tt,[Ft,e("tbody",null,[(n(!0),l(U,null,c(t.listUjianBaru,(d,i)=>(n(),l("tr",null,[e("td",Ot,h(i+1),1),e("td",Nt,[g(e("input",{"onUpdate:modelValue":o=>t.listUjianBaru[i].nameBatch=o,onFocus:o=>d.modeAddBatch=!0,onBlur:o=>t.modeAddBatchF(i),class:"form-control form-control-sm",style:{"z-index":"2"},type:"text"},null,40,zt),[[m,t.listUjianBaru[i].nameBatch]]),e("div",{class:u(["list-group position-absolute overflow-auto",{"d-none":!d.modeAddBatch,"d-block":d.modeAddBatch}]),style:{"z-index":"3"}},[e("div",Ht,[(n(!0),l(U,null,c(t.listBatch,(o,Wt)=>(n(),l("span",null,[!t.listUjianBaru[i].nameBatch||o.name.toLowerCase().includes(t.listUjianBaru[i].nameBatch.toLowerCase())?(n(),l("span",{key:0,onClick:Xt=>t.listUjianBaru[i].nameBatch=o.name,class:"list-group-item list-group-item-action"},h(o.name),9,Lt)):r("",!0)]))),256))])],2)]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>t.listUjianBaru[i].name=o,class:"form-control form-control-sm",type:"text"},null,8,It),[[m,t.listUjianBaru[i].name]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>t.listUjianBaru[i].pengawas=o,class:"form-control form-control-sm",type:"text"},null,8,Jt),[[m,t.listUjianBaru[i].pengawas]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>t.listUjianBaru[i].time=o,class:"form-control form-control-sm",type:"time"},null,8,Gt),[[m,t.listUjianBaru[i].time]])]),e("td",null,[g(e("input",{"onUpdate:modelValue":o=>t.listUjianBaru[i].date=o,class:"form-control form-control-sm",type:"datetime-local"},null,8,qt),[[m,t.listUjianBaru[i].date]])]),e("td",{class:"text-center",onClick:o=>t.listUjianBaru.splice(i,1)},"x",8,Rt)]))),256))])])])],2),t.displayMessage?(n(),l("div",Kt,[e("div",{class:u([{"alert-danger":!t.messageStatus,"alert-success":t.messageStatus},"alert d-none d-lg-block"])},h(t.message),3)])):r("",!0)],64))}});export{xt as default};
