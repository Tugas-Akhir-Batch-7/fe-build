import{o as a,c as l,a as t,d as h,q as d,k as c,F as m,i as b,t as n,g as u,b as S,v as p}from"./index.6b43fdec.js";import T from"./sidebar.8e7b97f4.js";const f={class:"d-flex flex-nowrap"},y={class:"d-flex flex-column flex-fill p-3"},k={class:"nav-tabs d-flex justify-content-between"},v=t("h3",{class:"nav-link active bg-light text-warning"},"Tugas",-1),_={class:"d-flex align-items-center"},M={class:"btn-group",role:"group","aria-label":"Basic mixed styles example"},A={class:"table table-hover",style:{"margin-bottom":"2em"}},w=t("thead",null,[t("tr",null,[t("th",{scope:"col"}),t("th",{scope:"col"},"Username"),t("th",{scope:"col"},"Date Sumbit"),t("th",{scope:"col"},"Link Submit"),t("th",{scope:"col"},"Score")])],-1),N={key:0},$=t("td",{colspan:"10"},[t("div",{class:"text-center"},[t("div",{class:"spinner-border text-warning",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])],-1),B=[$],C={key:1},F=t("td",{colspan:"10",class:"text-center"},"Data Tidak Tersedia",-1),O=[F],V={style:{width:"5%","text-align":"center"}},j={key:0,style:{width:"10%","text-align":"center"}},D=["onKeyup","onUpdate:modelValue"],J={key:1,style:{width:"5%","text-align":"center"}},L={key:0,class:"min-vw-100 position-fixed top-0 text-center",style:{}},U={data:()=>({token:"",editMode:!1,listTugasSubmit:[],listTugasSubmitAdd:[],displayMessage:!1}),async mounted(){try{this.token=await this.$store.getters["auth/token"],u.defaults.headers.common.token=this.token,this.listTugasSubmit=(await u.get("guru/listTugasSubmit/"+this.$route.params.id,{})).data.data,this.listTugasSubmit.length==0&&(this.listTugasSubmit=!1),this.listTugasSubmitAdd=JSON.parse(JSON.stringify(this.listTugasSubmit))}catch(e){console.log("error"),console.log(e)}},methods:{async cekScore(e){try{this.listTugasSubmitAdd[e].score>100?this.listTugasSubmitAdd[e].score=100:this.listTugasSubmitAdd[e].score=Number.parseInt(this.listTugasSubmitAdd[e].score)}catch(s){console.log("error"),console.log(s)}},async refreshTugas(e,s){try{this.listTugasSubmit=(await u.get("guru/listTugasSubmit/"+this.$route.params.id,{})).data.data,this.listTugasSubmit.length==0&&(this.listTugasSubmit=!1),this.listTugasSubmitAdd=JSON.parse(JSON.stringify(this.listTugasSubmit)),e?this.messageF(e,s):this.messageF("Refresh Tugas",!0)}catch(i){console.log("error"),console.log(i)}},async saveAddAcore(){try{for(let e=0;e<this.listTugasSubmit.length;e++)this.listTugasSubmit[e].score!=this.listTugasSubmitAdd[e].score&&await u.post("guru/addScoreTugas/"+this.listTugasSubmitAdd[e].id_tugas,{[this.listTugasSubmitAdd[e].id]:this.listTugasSubmitAdd[e].score});this.refreshTugas("Berhasil Mengupdate Score Tugas Submit",!0),this.editMode=!1}catch(e){console.log("error"),console.log(e)}},messageF(e,s){this.displayMessage=!0,this.messageStatus=s,this.message=e||"terjadi error",setTimeout(()=>{this.displayMessage=!1,this.message="terjadi error"},3e3)}}},q=Object.assign(U,{__name:"scoreTugas",setup(e){return(s,i)=>(a(),l(m,null,[t("main",f,[h(T),t("div",y,[t("div",k,[v,t("div",_,[t("div",M,[t("button",{type:"button",class:d(["btn-sm btn btn-outline-primary",{"d-block":!s.editMode,"d-none":s.editMode}]),onClick:i[0]||(i[0]=o=>s.editMode=!0)},"Add Score",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-warning",{"d-block":s.editMode,"d-none":!s.editMode}]),onClick:i[1]||(i[1]=o=>s.editMode=!1)},"Back",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-danger",{"d-block":s.editMode,"d-none":!s.editMode}]),onClick:i[2]||(i[2]=o=>s.refreshTugas())},"Reset",2),t("button",{type:"button",class:d(["btn-sm btn btn-outline-success",{"d-block":s.editMode,"d-none":!s.editMode}]),onClick:i[3]||(i[3]=o=>s.saveAddAcore())},"Save",2)])])]),t("table",A,[w,t("tbody",null,[s.listTugasSubmit.length==0?(a(),l("tr",N,B)):c("",!0),s.listTugasSubmit?c("",!0):(a(),l("tr",C,O)),(a(!0),l(m,null,b(s.listTugasSubmit,(o,r)=>(a(),l("tr",null,[t("td",V,n(r+1),1),t("td",null,n(o.name),1),t("td",null,n(o.submit_date),1),t("td",null,n(o.submit_link),1),s.editMode?(a(),l("td",j,[S(t("input",{onKeyup:g=>s.cekScore(r),"onUpdate:modelValue":g=>s.listTugasSubmitAdd[r].score=g,class:"form-control form-control-sm",type:"number",min:"1",max:"100"},null,40,D),[[p,s.listTugasSubmitAdd[r].score]])])):(a(),l("td",J,n(o.score||"-"),1))]))),256))])])])]),s.displayMessage?(a(),l("div",L,[t("div",{class:d([{"alert-danger":!s.messageStatus,"alert-success":s.messageStatus},"alert d-none d-lg-block"])},n(s.message),3)])):c("",!0)],64))}});export{q as default};
